{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<!-- Google Web Fonts -->
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Roboto:wght@500;700&display=swap" rel="stylesheet">

<!-- Icon Font Stylesheet -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/all.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

<!-- Libraries Stylesheet -->
<link href="{% static 'lib/owlcarousel/assets/owl.carousel.min.css' %}" rel="stylesheet">

<!-- Template Stylesheet -->
<link href="{% static 'css/style.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
<!-- Topbar Start -->
<div class="container-fluid px-5 d-none d-lg-block">
    <div class="row gx-5 py-3 align-items-center">
        <div class="col-lg-3">
            <div class="d-flex align-items-center justify-content-start">
                <i class="bi bi-phone-vibrate fs-1 text-primary me-2"></i>
                <h2 class="mb-0">+256 701 098 373</h2>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="d-flex align-items-center justify-content-center">
                <a href="{% url 'core:home' %}" class="navbar-brand ms-lg-5">
                    <h1 class="m-0 display-4 text-primary"><span class="text-secondary">AgriTrade</span>Africa</h1>
                </a>
            </div>
        </div>
    </div>
</div>
<!-- Topbar End -->

<!-- Navbar Start -->
<nav class="navbar navbar-expand-lg bg-primary navbar-dark shadow-sm py-3 py-lg-0 px-3 px-lg-5">
    <a href="{% url 'core:home' %}" class="navbar-brand d-flex d-lg-none">
        <h1 class="m-0 display-4 text-secondary"><span class="text-white">Agri</span>Trade</h1>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
        <div class="navbar-nav mx-auto py-0">
            <a href="{% url 'core:home' %}" class="nav-item nav-link active">Home</a>
            <a href="#" class="nav-item nav-link">About</a>
            <a href="#" class="nav-item nav-link">Service</a>
            <a href="#" class="nav-item nav-link">Product</a>
            <div class="nav-item dropdown">
                <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Categories</a>
                <div class="dropdown-menu m-0">
                    <a href="#" class="dropdown-item">Vegetables</a>
                    <a href="#" class="dropdown-item">Fruits</a>
                    <a href="#" class="dropdown-item">Juices</a>
                    <a href="#" class="dropdown-item">Dried Foods</a>
                </div>
            </div>
            <a href="#" class="nav-item nav-link">Contact</a>
        </div>
    </div>
</nav>
<!-- Navbar End -->

<!-- Carousel Start -->
<div class="container-fluid p-0">
    <div id="header-carousel" class="carousel slide carousel-fade" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="w-100" src="{% static 'img/carousel-1.jpg' %}" alt="Organic Vegetables">
                <div class="carousel-caption top-0 bottom-0 start-0 end-0 d-flex flex-column align-items-center justify-content-center">
                    <div class="text-start p-5" style="max-width: 900px;">
                        <h3 class="text-white">Organic Vegetables</h3>
                        <h1 class="display-1 text-white mb-md-4">Organic Vegetables For Healthy Life</h1>
                        <a href="#products" class="btn btn-primary py-md-3 px-md-5 me-3">Explore</a>
                        <a href="#" class="btn btn-secondary py-md-3 px-md-5">Contact</a>
                    </div>
                </div>
            </div>
            <div class="carousel-item">
                <img class="w-100" src="{% static 'img/carousel-2.jpg' %}" alt="Organic Fruits">
                <div class="carousel-caption top-0 bottom-0 start-0 end-0 d-flex flex-column align-items-center justify-content-center">
                    <div class="text-start p-5" style="max-width: 900px;">
                        <h3 class="text-white">Organic Fruits</h3>
                        <h1 class="display-1 text-white mb-md-4">Organic Fruits For Better Health</h1>
                        <a href="#products" class="btn btn-primary py-md-3 px-md-5 me-3">Explore</a>
                        <a href="#" class="btn btn-secondary py-md-3 px-md-5">Contact</a>
                    </div>
                </div>
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#header-carousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#header-carousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
</div>
<!-- Carousel End -->

<!-- Banner Start -->
<div class="container-fluid banner mb-5">
    <div class="container">
        <div class="row gx-0">
            <div class="col-md-6">
                <div class="bg-primary bg-vegetable d-flex flex-column justify-content-center p-5" style="height: 300px;">
                    <h3 class="text-white mb-3">Organic Vegetables</h3>
                    <p class="text-white">Organic vegetables enriched with vitamin C nutrients and chemical free natural products</p>
                    <a class="text-white fw-bold" href="#">Read More<i class="bi bi-arrow-right ms-2"></i></a>
                </div>
            </div>
            <div class="col-md-6">
                <div class="bg-secondary bg-fruit d-flex flex-column justify-content-center p-5" style="height: 300px;">
                    <h3 class="text-white mb-3">Organic Fruits</h3>
                    <p class="text-white">Grown on Africa's Fertile soils enriched with natural Nutrients</p>
                    <a class="text-white fw-bold" href="#">Read More<i class="bi bi-arrow-right ms-2"></i></a>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Banner End -->

<!-- Category Section Start -->
<section class="ftco-section ftco-category ftco-no-pt">
    <div class="container">
        <div class="row">
            <div class="col-md-8">
                <div class="row">
                    <div class="col-md-6 order-md-last align-items-stretch d-flex">
                        <div class="category-wrap-2 ftco-animate img align-self-stretch d-flex" style="background-image: url('{% static 'img/category.jpg' %}');">
                            <div class="text text-center">
                                <h2>Vegetables</h2>
                                <p>Protect the health of every home</p>
                                <p><a href="#products" class="btn btn-primary">Shop now</a></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="category-wrap ftco-animate img mb-4 d-flex align-items-end" style="background-image: url('{% static 'img/category-1.jpg' %}');">
                            <div class="text px-3 py-1">
                                <h2 class="mb-0"><a href="#">Fruits</a></h2>
                            </div>
                        </div>
                        <div class="category-wrap ftco-animate img d-flex align-items-end" style="background-image: url('{% static 'img/category-2.jpg' %}');">
                            <div class="text px-3 py-1">
                                <h2 class="mb-0"><a href="#">Vegetables</a></h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="category-wrap ftco-animate img mb-4 d-flex align-items-end" style="background-image: url('{% static 'img/category-3.jpg' %}');">
                    <div class="text px-3 py-1">
                        <h2 class="mb-0"><a href="#">Juices</a></h2>
                    </div>
                </div>
                <div class="category-wrap ftco-animate img d-flex align-items-end" style="background-image: url('{% static 'img/category-4.jpg' %}');">
                    <div class="text px-3 py-1">
                        <h2 class="mb-0"><a href="#">Dried</a></h2>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Category Section End -->

<!-- Products Section Start -->
<section id="products" class="container-fluid py-5">
    <div class="container">
        <!-- Section Header -->
        <div class="mx-auto text-center mb-5" style="max-width: 500px;">
            <h6 class="text-primary text-uppercase">Products</h6>
            <h1 class="display-5">Our Fresh & Organic Products</h1>
        </div>

        <!-- Category Filter -->
        <nav class="navbar navbar-expand-lg navbar-light bg-light mb-4 rounded">
            <span class="navbar-brand mb-0 h1">Categories:</span>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#categoryNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="categoryNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#">All</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Vegetables</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Fruits</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Juices</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Dried</a>
                    </li>
                </ul>
                <form class="d-flex">
                    <input class="form-control me-2" type="search" placeholder="Search products..." aria-label="Search">
                    <button class="btn btn-outline-primary" type="submit">Search</button>
                </form>
            </div>
        </nav>

        <!-- Products Grid -->
        <div class="row">
            {% for item in object_list %}
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="product-item position-relative bg-white d-flex flex-column text-center h-100 shadow-sm rounded">
                    <div class="product-image-wrapper">
                        {% if item.image %}
                            <img src="{{ item.image.url }}" class="img-fluid product-image" alt="{{ item.title }}">
                        {% else %}
                            <img src="{% static 'img/product-placeholder.png' %}" class="img-fluid product-image" alt="{{ item.title }}">
                        {% endif %}
                        <div class="product-overlay">
                            <div class="btn-action d-flex justify-content-center">
                                <a class="btn bg-primary py-2 px-3 me-2" href="{{ item.get_absolute_url }}" title="Add to Cart">
                                    <i class="bi bi-cart text-white"></i>
                                </a>
                                <a class="btn bg-secondary py-2 px-3" href="{{ item.get_absolute_url }}" title="View Details">
                                    <i class="bi bi-eye text-white"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="product-info p-3 flex-grow-1 d-flex flex-column">
                        <span class="text-muted small">{{ item.get_category_display }}</span>
                        <h6 class="mb-2 flex-grow-1">
                            <a href="{{ item.get_absolute_url }}" class="text-decoration-none text-dark">
                                {{ item.title }}
                            </a>
                        </h6>
                        
                        <div class="price-section">
                            {% if item.discount_price %}
                                <h5 class="text-primary mb-0">
                                    <strong>${{ item.discount_price }}</strong>
                                    <small class="text-muted text-decoration-line-through ms-2">${{ item.price }}</small>
                                </h5>
                                <span class="badge bg-danger">Sale</span>
                            {% else %}
                                <h5 class="text-primary mb-0">
                                    <strong>${{ item.price }}</strong>
                                </h5>
                            {% endif %}
                        </div>
                        
                        {% if item.get_label_display %}
                            <span class="badge {{ item.get_label_display }}-color mt-2">{{ item.get_label_display|upper }}</span>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="col-12 text-center">
                <p class="lead">No products available at the moment.</p>
            </div>
            {% endfor %}
        </div>

        <!-- Pagination -->
        {% if is_paginated %}
        <nav class="d-flex justify-content-center mt-5">
            <ul class="pagination">
                {% if page_obj.has_previous %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                {% endif %}

                <li class="page-item active">
                    <a class="page-link" href="?page={{ page_obj.number }}">{{ page_obj.number }}</a>
                </li>

                {% if page_obj.has_next %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
                {% endif %}
            </ul>
        </nav>
        {% endif %}
    </div>
</section>
<!-- Products Section End -->

{% endblock content %}

{% block extra_js %}
<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Owl Carousel JS -->
<script src="{% static 'lib/owlcarousel/owl.carousel.min.js' %}"></script>
<!-- Custom JS -->
<script src="{% static 'js/main.js' %}"></script>
{% endblock %}